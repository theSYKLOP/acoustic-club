import{y as m,x,e as p,n as h,c as f,a as t,t as a,k as o,b as d,w as u,_ as v,o as b}from"#entry";import{u as y}from"./BZIEon5x.js";import{u as w}from"./ByDS247P.js";const k=m("menus",{state:()=>({menus:[],selectedMenu:null,loading:!1,error:null}),getters:{menusByCategory:r=>e=>r.menus.filter(l=>l.category===e&&l.available),availableMenus:r=>r.menus.filter(e=>e.available),entr√©es:r=>r.menus.filter(e=>e.category==="ENTREE"&&e.available),plats:r=>r.menus.filter(e=>e.category==="PLAT"&&e.available),desserts:r=>r.menus.filter(e=>e.category==="DESSERT"&&e.available),boissons:r=>r.menus.filter(e=>["BOISSON","ALCOOL","COCKTAIL"].includes(e.category)&&e.available)},actions:{async fetchMenus(){this.loading=!0,this.error=null;try{this.menus=await $fetch("/api/menus")}catch(r){this.error=r.data?.message||"Erreur lors du chargement du menu"}finally{this.loading=!1}},async fetchMenu(r){this.loading=!0,this.error=null;try{this.selectedMenu=await $fetch(`/api/menus/${r}`)}catch(e){this.error=e.data?.message||"Erreur lors du chargement du plat"}finally{this.loading=!1}},async createMenu(r){this.loading=!0,this.error=null;try{const e=x(),l=await $fetch("/api/menus",{method:"POST",headers:{Authorization:`Bearer ${e.token}`},body:r});return this.menus.push(l),{success:!0,data:l}}catch(e){return this.error=e.data?.message||"Erreur lors de la cr√©ation du plat",{success:!1,error:this.error}}finally{this.loading=!1}},async updateMenu(r,e){this.loading=!0,this.error=null;try{const l=x(),n=await $fetch(`/api/menus/${r}`,{method:"PUT",headers:{Authorization:`Bearer ${l.token}`},body:e}),g=this.menus.findIndex(c=>c.id===r);return g!==-1&&(this.menus[g]=n),{success:!0,data:n}}catch(l){return this.error=l.data?.message||"Erreur lors de la mise √† jour du plat",{success:!1,error:this.error}}finally{this.loading=!1}},async deleteMenu(r){this.loading=!0,this.error=null;try{const e=x();return await $fetch(`/api/menus/${r}`,{method:"DELETE",headers:{Authorization:`Bearer ${e.token}`}}),this.menus=this.menus.filter(l=>l.id!==r),{success:!0}}catch(e){return this.error=e.data?.message||"Erreur lors de la suppression du plat",{success:!1,error:this.error}}finally{this.loading=!1}}}}),M={class:"grid grid-cols-1 xs:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 lg:gap-6 mb-6 lg:mb-8"},S={class:"card-base p-4 sm:p-5 lg:p-6 hover:shadow-lg transition-shadow"},_={class:"flex items-center justify-between mb-3 lg:mb-4"},C={class:"px-2 py-1 bg-indigo-50 text-indigo-600 rounded-full text-xs lg:text-sm font-medium"},E={class:"text-2xl lg:text-3xl font-bold mb-1"},B={class:"mt-2 text-xs text-gray-500"},j={class:"card-base p-4 sm:p-5 lg:p-6 hover:shadow-lg transition-shadow"},A={class:"text-2xl lg:text-3xl font-bold mb-1"},T={class:"mt-2 text-xs text-gray-500"},$={class:"card-base p-4 sm:p-5 lg:p-6 hover:shadow-lg transition-shadow"},O={class:"text-2xl lg:text-3xl font-bold mb-1"},L={class:"mt-2 text-xs text-gray-500"},N={class:"card-base p-4 sm:p-5 lg:p-6 hover:shadow-lg transition-shadow"},R={class:"text-xl sm:text-2xl lg:text-3xl font-bold mb-1"},I={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 lg:gap-6"},z=p({__name:"index",setup(r){const e=y(),l=w(),n=k(),g=c=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(c);return h(async()=>{await Promise.all([e.fetchTables(),l.fetchOrders(),n.fetchMenus()])}),(c,s)=>{const i=v;return b(),f("div",null,[s[15]||(s[15]=t("div",{class:"lg:hidden mb-6"},[t("h1",{class:"text-2xl font-bold mb-1"},"Administration"),t("p",{class:"text-sm text-gray-600"},"Vue d'ensemble du syst√®me")],-1)),t("div",M,[t("div",S,[t("div",_,[s[0]||(s[0]=t("div",{class:"text-3xl lg:text-4xl"},"ü™ë",-1)),t("div",C,a(o(e).occupancyRate)+"% ",1)]),t("h3",E,a(o(e).totalTables),1),s[1]||(s[1]=t("p",{class:"text-xs lg:text-sm text-gray-600"},"Tables totales",-1)),t("div",B,a(o(e).occupiedTables.length)+" occup√©es ",1)]),t("div",j,[s[2]||(s[2]=t("div",{class:"flex items-center justify-between mb-3 lg:mb-4"},[t("div",{class:"text-3xl lg:text-4xl"},"üìã"),t("span",{class:"badge-warning text-xs"},"Actives")],-1)),t("h3",A,a(o(l).activeOrders.length),1),s[3]||(s[3]=t("p",{class:"text-xs lg:text-sm text-gray-600"},"Commandes actives",-1)),t("div",T,a(o(l).todayOrders.length)+" aujourd'hui ",1)]),t("div",$,[s[4]||(s[4]=t("div",{class:"flex items-center justify-between mb-3 lg:mb-4"},[t("div",{class:"text-3xl lg:text-4xl"},"üçΩÔ∏è"),t("span",{class:"badge-info text-xs"},"Menu")],-1)),t("h3",O,a(o(n).availableMenus.length),1),s[5]||(s[5]=t("p",{class:"text-xs lg:text-sm text-gray-600"},"Items disponibles",-1)),t("div",L,a(o(n).menus.length)+" total ",1)]),t("div",N,[s[6]||(s[6]=t("div",{class:"flex items-center justify-between mb-3 lg:mb-4"},[t("div",{class:"text-3xl lg:text-4xl"},"üí∞"),t("span",{class:"badge-success text-xs"},"CA")],-1)),t("h3",R,a(g(o(l).totalRevenue)),1),s[7]||(s[7]=t("p",{class:"text-xs lg:text-sm text-gray-600"},"Chiffre d'affaires",-1)),s[8]||(s[8]=t("div",{class:"mt-2 text-xs text-gray-500"}," Total g√©n√©r√© ",-1))])]),s[16]||(s[16]=t("h2",{class:"text-lg lg:text-xl font-bold mb-4 lg:mb-6"},"Actions rapides",-1)),t("div",I,[d(i,{to:"/admin/tables",class:"card-hover p-4 sm:p-5 lg:p-6 group"},{default:u(()=>[...s[9]||(s[9]=[t("div",{class:"flex items-center gap-3 lg:gap-4"},[t("div",{class:"text-3xl lg:text-4xl group-hover:scale-110 transition-transform"},"ü™ë"),t("div",{class:"flex-1 min-w-0"},[t("h3",{class:"font-bold text-base lg:text-lg mb-1"},"G√©rer les tables"),t("p",{class:"text-xs lg:text-sm text-gray-600 truncate"},"Cr√©er, modifier, supprimer")]),t("div",{class:"text-gray-400 group-hover:text-indigo-600 transition-colors"},[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])])],-1)])]),_:1}),d(i,{to:"/admin/menus",class:"card-hover p-4 sm:p-5 lg:p-6 group"},{default:u(()=>[...s[10]||(s[10]=[t("div",{class:"flex items-center gap-3 lg:gap-4"},[t("div",{class:"text-3xl lg:text-4xl group-hover:scale-110 transition-transform"},"üçΩÔ∏è"),t("div",{class:"flex-1 min-w-0"},[t("h3",{class:"font-bold text-base lg:text-lg mb-1"},"G√©rer le menu"),t("p",{class:"text-xs lg:text-sm text-gray-600 truncate"},"Ajouter, modifier des plats")]),t("div",{class:"text-gray-400 group-hover:text-indigo-600 transition-colors"},[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])])],-1)])]),_:1}),d(i,{to:"/admin/orders",class:"card-hover p-4 sm:p-5 lg:p-6 group"},{default:u(()=>[...s[11]||(s[11]=[t("div",{class:"flex items-center gap-3 lg:gap-4"},[t("div",{class:"text-3xl lg:text-4xl group-hover:scale-110 transition-transform"},"üìã"),t("div",{class:"flex-1 min-w-0"},[t("h3",{class:"font-bold text-base lg:text-lg mb-1"},"Voir les commandes"),t("p",{class:"text-xs lg:text-sm text-gray-600 truncate"},"Historique et suivi")]),t("div",{class:"text-gray-400 group-hover:text-indigo-600 transition-colors"},[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])])],-1)])]),_:1}),d(i,{to:"/admin/users",class:"card-hover p-4 sm:p-5 lg:p-6 group"},{default:u(()=>[...s[12]||(s[12]=[t("div",{class:"flex items-center gap-3 lg:gap-4"},[t("div",{class:"text-3xl lg:text-4xl group-hover:scale-110 transition-transform"},"üë•"),t("div",{class:"flex-1 min-w-0"},[t("h3",{class:"font-bold text-base lg:text-lg mb-1"},"Utilisateurs"),t("p",{class:"text-xs lg:text-sm text-gray-600 truncate"},"G√©rer les acc√®s")]),t("div",{class:"text-gray-400 group-hover:text-indigo-600 transition-colors"},[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])])],-1)])]),_:1}),d(i,{to:"/admin/stats",class:"card-hover p-4 sm:p-5 lg:p-6 group"},{default:u(()=>[...s[13]||(s[13]=[t("div",{class:"flex items-center gap-3 lg:gap-4"},[t("div",{class:"text-3xl lg:text-4xl group-hover:scale-110 transition-transform"},"üìà"),t("div",{class:"flex-1 min-w-0"},[t("h3",{class:"font-bold text-base lg:text-lg mb-1"},"Statistiques"),t("p",{class:"text-xs lg:text-sm text-gray-600 truncate"},"Analyser les performances")]),t("div",{class:"text-gray-400 group-hover:text-indigo-600 transition-colors"},[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])])],-1)])]),_:1}),d(i,{to:"/dashboard",class:"card-hover p-4 sm:p-5 lg:p-6 border-2 border-indigo-200 group"},{default:u(()=>[...s[14]||(s[14]=[t("div",{class:"flex items-center gap-3 lg:gap-4"},[t("div",{class:"text-3xl lg:text-4xl group-hover:scale-110 transition-transform"},"üè†"),t("div",{class:"flex-1 min-w-0"},[t("h3",{class:"font-bold text-base lg:text-lg mb-1"},"Dashboard client"),t("p",{class:"text-xs lg:text-sm text-gray-600 truncate"},"Vue utilisateur")]),t("div",{class:"text-gray-400 group-hover:text-indigo-600 transition-colors"},[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])])],-1)])]),_:1})])])}}});export{z as default};
