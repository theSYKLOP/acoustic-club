import{u as C}from"./BZIEon5x.js";import{u as T}from"./ByDS247P.js";import{e as S,n as k,c as l,a as t,t as n,k as r,l as d,F as b,s as u,o,q as m,D as N}from"#entry";const O={class:"min-h-screen bg-gray-50"},P={class:"container-base px-4 sm:px-6 lg:px-8 py-4 sm:py-6 lg:py-8"},w={class:"grid grid-cols-1 xs:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 lg:gap-6 mb-6 lg:mb-8"},A={class:"card-base p-4 sm:p-5 lg:p-6 hover:shadow-lg transition-shadow"},I={class:"text-xl sm:text-2xl font-bold mb-1"},V={class:"mt-2 text-xs text-gray-500"},L={class:"card-base p-4 sm:p-5 lg:p-6 hover:shadow-lg transition-shadow"},B={class:"text-xl sm:text-2xl font-bold mb-1"},F={class:"card-base p-4 sm:p-5 lg:p-6 hover:shadow-lg transition-shadow xs:col-span-2 lg:col-span-1"},U={class:"text-xl sm:text-2xl font-bold mb-1"},$={class:"card-base p-4 sm:p-5 lg:p-6 mb-6 lg:mb-8"},D={class:"grid grid-cols-1 xs:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4"},j=["onClick"],q={class:"flex items-start justify-between mb-2"},H={class:"text-base sm:text-lg lg:text-xl font-bold"},M={class:"text-xs sm:text-sm text-gray-600"},z={key:0,class:"text-xs text-gray-500 mt-1"},Y={key:0,class:"text-center py-12"},G={class:"card-base p-4 sm:p-5 lg:p-6"},J={key:0,class:"text-center py-8 lg:py-12"},K={key:1,class:"space-y-3 sm:space-y-4"},Q={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-3"},W={class:"flex-1 min-w-0"},X={class:"font-bold text-base lg:text-lg"},Z={class:"text-xs lg:text-sm text-gray-600"},tt={class:"flex items-center gap-3 sm:flex-shrink-0"},st={class:"font-bold text-base lg:text-lg"},et={class:"flex flex-wrap gap-2"},at=["onClick"],lt=["onClick"],nt=["onClick"],ot=["onClick"],ct=S({__name:"index",setup(rt){const x=C(),i=T(),p=a=>{N(`/tables/${a.id}`)},c=async(a,s)=>{await i.updateOrderStatus(a,s),await i.fetchOrders()},E=a=>({LIBRE:"border-green-500 bg-green-50 hover:bg-green-100",OCCUPEE:"border-red-500 bg-red-50 hover:bg-red-100",RESERVEE:"border-orange-500 bg-orange-50 hover:bg-orange-100",HORS_SERVICE:"border-gray-300 bg-gray-50 opacity-60"})[a],_=a=>({LIBRE:"badge-success",OCCUPEE:"badge-danger",RESERVEE:"badge-warning",HORS_SERVICE:"badge-neutral"})[a],v=a=>({LIBRE:"Libre",OCCUPEE:"Occupée",RESERVEE:"Réservée",HORS_SERVICE:"Hors service"})[a],y=a=>({EN_ATTENTE:"badge-warning",EN_PREPARATION:"badge-info",PRET:"badge-primary",SERVI:"badge-success",ANNULE:"badge-danger",PAYE:"badge-success"})[a],f=a=>({EN_ATTENTE:"En attente",EN_PREPARATION:"En préparation",PRET:"Prêt",SERVI:"Servi",ANNULE:"Annulé",PAYE:"Payé"})[a],h=a=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(a),R=a=>new Intl.DateTimeFormat("fr-FR",{hour:"2-digit",minute:"2-digit"}).format(new Date(a));return k(async()=>{await Promise.all([x.fetchTables(),i.fetchOrders()])}),(a,s)=>(o(),l("div",O,[t("div",P,[s[12]||(s[12]=t("div",{class:"mb-6 lg:mb-8"},[t("h1",{class:"text-2xl sm:text-3xl lg:text-4xl font-bold mb-2"},"Interface Serveur 👨‍💼"),t("p",{class:"text-sm lg:text-base text-gray-600"},"Gérez les attributions de tables et prenez les commandes")],-1)),t("div",w,[t("div",A,[s[0]||(s[0]=t("div",{class:"text-2xl sm:text-3xl mb-2 lg:mb-3"},"🪑",-1)),t("h3",I,n(r(x).freeTables.length),1),s[1]||(s[1]=t("p",{class:"text-xs lg:text-sm text-gray-600"},"Tables libres",-1)),t("div",V,n(r(x).totalTables)+" au total ",1)]),t("div",L,[s[2]||(s[2]=t("div",{class:"text-2xl sm:text-3xl mb-2 lg:mb-3"},"📋",-1)),t("h3",B,n(r(i).pendingOrders.length),1),s[3]||(s[3]=t("p",{class:"text-xs lg:text-sm text-gray-600"},"Commandes en attente",-1)),s[4]||(s[4]=t("div",{class:"mt-2 text-xs text-gray-500"}," À traiter ",-1))]),t("div",F,[s[5]||(s[5]=t("div",{class:"text-2xl sm:text-3xl mb-2 lg:mb-3"},"✅",-1)),t("h3",U,n(r(i).todayOrders.length),1),s[6]||(s[6]=t("p",{class:"text-xs lg:text-sm text-gray-600"},"Commandes du jour",-1)),s[7]||(s[7]=t("div",{class:"mt-2 text-xs text-gray-500"}," Total aujourd'hui ",-1))])]),t("div",$,[s[9]||(s[9]=t("h2",{class:"text-lg sm:text-xl lg:text-2xl font-bold mb-4 lg:mb-6"},"État des tables",-1)),t("div",D,[(o(!0),l(b,null,u(r(x).tables,e=>(o(),l("div",{key:e.id,class:m(["p-3 sm:p-4 rounded-lg border-2 cursor-pointer transition-all hover:shadow-md",E(e.status)]),onClick:g=>p(e)},[t("div",q,[t("h3",H,"Table "+n(e.number),1),t("span",{class:m(["badge-base text-xs",_(e.status)])},n(v(e.status)),3)]),t("p",M," 👥 "+n(e.capacity)+" pers. ",1),e.location?(o(),l("p",z," 📍 "+n(e.location),1)):d("",!0)],10,j))),128))]),r(x).tables.length===0?(o(),l("div",Y,[...s[8]||(s[8]=[t("div",{class:"text-4xl lg:text-5xl mb-3"},"🪑",-1),t("p",{class:"text-sm lg:text-base text-gray-600"},"Aucune table disponible",-1)])])):d("",!0)]),t("div",G,[s[11]||(s[11]=t("h2",{class:"text-lg sm:text-xl lg:text-2xl font-bold mb-4 lg:mb-6"},"Commandes actives",-1)),r(i).activeOrders.length===0?(o(),l("div",J,[...s[10]||(s[10]=[t("div",{class:"text-4xl lg:text-5xl mb-3"},"📋",-1),t("p",{class:"text-sm lg:text-base text-gray-600"},"Aucune commande active",-1)])])):(o(),l("div",K,[(o(!0),l(b,null,u(r(i).activeOrders,e=>(o(),l("div",{key:e.id,class:"border border-gray-200 rounded-lg p-3 sm:p-4 hover:bg-gray-50 transition-colors"},[t("div",Q,[t("div",W,[t("h3",X,"Commande "+n(e.orderNumber),1),t("p",Z," Table "+n(e.table?.number)+" • "+n(R(e.createdAt)),1)]),t("div",tt,[t("span",{class:m(["badge-base text-xs",y(e.status)])},n(f(e.status)),3),t("p",st,n(h(e.totalAmount)),1)])]),t("div",et,[e.status==="EN_ATTENTE"?(o(),l("button",{key:0,onClick:g=>c(e.id,"EN_PREPARATION"),class:"btn-warning btn-sm text-xs lg:text-sm flex-1 xs:flex-none"}," ⏳ En préparation ",8,at)):d("",!0),e.status==="EN_PREPARATION"?(o(),l("button",{key:1,onClick:g=>c(e.id,"PRET"),class:"btn-info btn-sm text-xs lg:text-sm flex-1 xs:flex-none"}," ✅ Marquer prêt ",8,lt)):d("",!0),e.status==="PRET"?(o(),l("button",{key:2,onClick:g=>c(e.id,"SERVI"),class:"btn-success btn-sm text-xs lg:text-sm flex-1 xs:flex-none"}," 🍽️ Marquer servi ",8,nt)):d("",!0),e.status==="SERVI"?(o(),l("button",{key:3,onClick:g=>c(e.id,"PAYE"),class:"btn-primary btn-sm text-xs lg:text-sm flex-1 xs:flex-none"}," 💰 Marquer payé ",8,ot)):d("",!0)])]))),128))]))])])]))}});export{ct as default};
